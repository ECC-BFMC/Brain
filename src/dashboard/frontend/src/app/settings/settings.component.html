<div *ngIf="open" class="settings-overlay" (click)="handleClose()">
  <div class="settings-dialog" role="dialog" aria-modal="true" aria-label="Settings" (click)="$event.stopPropagation()">
    <div class="settings-header">
      <h2>Settings</h2>
      <button class="header-close" (click)="handleClose()" aria-label="Close">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z" />
        </svg>
      </button>
    </div>
    <div class="settings-body">
      <div class="settings-layout">
        <!-- Left Half - Calibration Section -->
        <div class="calibration-section" [class.calibration-active]="showCalibration">
          <div class="section-header">
            <h3>Speed and Steer Calibration</h3>
            <button *ngIf="!showCalibration" class="btn-primary" (click)="startCalibration()">
              Start Calibration
            </button>
            <button *ngIf="showCalibration" class="btn-secondary" (click)="onCalibrationClose()">
              Exit Calibration
            </button>
          </div>

          <!-- Calibration Component -->
          <app-calibration [show]="showCalibration" [shouldExit]="requestCalibrationExit" (close)="onCalibrationClose()"
            (complete)="onCalibrationComplete()" (exited)="onCalibrationExited()">
          </app-calibration>

          <!-- Calibration Status when not active -->
          <div *ngIf="!showCalibration" class="calibration-info">
            <p>Speed and steer calibration helps ensure accurate vehicle control and movement precision.</p>
            <ul>
              <li>Step-by-step guided process</li>
              <li>Visual instructions with diagrams</li>
              <li>Configurable parameters</li>
              <li>Validation and testing</li>
            </ul>
          </div>
        </div>

        <!-- Right Half - Available for future content -->
        <div class="right-section">
          <!-- Space available for additional settings -->
        </div>
      </div>
    </div>
  </div>

</div>